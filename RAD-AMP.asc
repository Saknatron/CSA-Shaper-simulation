Version 4
SHEET 1 4260 1056
WIRE 160 -352 0 -352
WIRE 160 -304 160 -352
WIRE 1920 -272 1872 -272
WIRE 2032 -272 2000 -272
WIRE 2064 -272 2032 -272
WIRE 2176 -272 2144 -272
WIRE 960 -240 864 -240
WIRE 1120 -240 1040 -240
WIRE 64 -192 0 -192
WIRE 160 -192 160 -224
WIRE 160 -192 128 -192
WIRE 2032 -192 2032 -272
WIRE 2064 -192 2032 -192
WIRE 0 -144 0 -192
WIRE 160 -144 160 -192
WIRE 864 -144 864 -240
WIRE 960 -144 864 -144
WIRE 1120 -144 1120 -240
WIRE 1120 -144 1024 -144
WIRE 2464 -128 2208 -128
WIRE 2704 -128 2464 -128
WIRE 1328 -112 1296 -112
WIRE 1440 -112 1408 -112
WIRE 1680 -112 1632 -112
WIRE 1824 -112 1760 -112
WIRE 2208 -80 2208 -128
WIRE 1008 -16 1008 -32
WIRE 2560 -16 2560 -32
WIRE -352 0 -400 0
WIRE -224 0 -272 0
WIRE -176 0 -224 0
WIRE 48 0 -112 0
WIRE 160 0 160 -64
WIRE 160 0 48 0
WIRE 320 0 160 0
WIRE 416 0 384 0
WIRE 864 0 864 -144
WIRE 864 0 416 0
WIRE 976 0 864 0
WIRE 1728 0 1728 -16
WIRE 2464 0 2464 -128
WIRE 2528 0 2464 0
WIRE 1120 16 1120 -144
WIRE 1120 16 1040 16
WIRE 1168 16 1120 16
WIRE 1264 16 1232 16
WIRE 1296 16 1296 -112
WIRE 1296 16 1264 16
WIRE 1344 16 1296 16
WIRE 1440 16 1440 -112
WIRE 1440 16 1408 16
WIRE 1504 16 1440 16
WIRE 1632 16 1632 -112
WIRE 1632 16 1584 16
WIRE 1696 16 1632 16
WIRE 2704 16 2704 -128
WIRE 2704 16 2592 16
WIRE 2752 16 2704 16
WIRE 2912 16 2816 16
WIRE -224 32 -224 0
WIRE 416 32 416 0
WIRE 976 32 864 32
WIRE 1824 32 1824 -112
WIRE 1824 32 1760 32
WIRE 1888 32 1824 32
WIRE 2000 32 1952 32
WIRE 2064 32 2000 32
WIRE 2208 32 2208 -16
WIRE 2208 32 2144 32
WIRE 2272 32 2208 32
WIRE 2400 32 2352 32
WIRE 2528 32 2400 32
WIRE 48 48 48 0
WIRE 1696 48 1632 48
WIRE -400 64 -400 0
WIRE 160 64 160 0
WIRE 1008 80 1008 48
WIRE 2000 80 2000 32
WIRE 2560 80 2560 48
WIRE 1728 96 1728 64
WIRE 2400 96 2400 32
WIRE 416 128 416 96
WIRE 864 128 864 32
WIRE 1632 144 1632 48
WIRE -400 176 -400 144
WIRE -224 176 -224 112
WIRE 48 176 48 128
WIRE 160 176 160 128
WIRE 2000 208 2000 160
WIRE 2400 208 2400 160
WIRE 2400 208 2000 208
WIRE 2000 224 2000 208
FLAG 864 128 0
FLAG 1264 16 CSA
FLAG 416 128 0
FLAG 1008 -32 V+
FLAG 1008 80 V-
FLAG 2064 -192 0
FLAG 1872 -272 V+
FLAG 2176 -272 V-
FLAG -400 176 0
FLAG 160 176 0
FLAG 0 -144 0
FLAG 0 -352 V-
FLAG -224 176 0
FLAG 48 176 0
FLAG 2000 224 0
FLAG 2400 32 n1
FLAG 1632 144 0
FLAG 1728 -16 V+
FLAG 1728 96 V-
FLAG 2560 -32 V+
FLAG 2560 80 V-
FLAG 2912 16 Out
SYMBOL cap 1024 -160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value {cf}
SYMBOL res 1056 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {rf}
SYMBOL cap 400 32 R0
SYMATTR InstName C5
SYMATTR Value {cpcb}
SYMBOL cap 384 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value {cc}
SYMBOL voltage 1904 -272 R270
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=1
SYMATTR InstName V1
SYMATTR Value {vsp}
SYMBOL voltage 2048 -272 R270
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=1
SYMATTR InstName V2
SYMATTR Value {vsp}
SYMBOL voltage -400 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vpulse
SYMATTR Value PULSE(0 {Vps} .2m 5n 5n 10m 1)
SYMBOL res -256 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL cap -112 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {ctest}
SYMBOL res 144 -160 R0
SYMATTR InstName R4
SYMATTR Value 100Meg
SYMBOL res 144 -320 R0
SYMATTR InstName R10
SYMATTR Value 10Meg
SYMBOL cap 144 64 R0
SYMATTR InstName Cdet
SYMATTR Value {Cdet}
SYMBOL cap 128 -208 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 0.1u
SYMBOL res -240 16 R0
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL OpAmps\\UniversalOpAmp4 1008 16 R0
SYMATTR InstName Opamp1
SYMATTR Value2 Avol={avol} GBW={gbw} Slew={slew}
SYMATTR SpiceLine Ilimit={il} Rail=0 Vos={vos} Phimargin={phi}
SYMATTR SpiceLine2 En={en} In={iin} Rin={rin} Ro={ro} Ccm={ccm} Cdiff={cdiff}
SYMBOL current 48 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Idet
SYMATTR Value 0
SYMBOL cap 1232 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value {cc}
SYMBOL res 1984 64 R0
SYMATTR InstName R5
SYMATTR Value {rhp}
SYMBOL cap 1952 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value {chp}
SYMBOL res 2368 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {rlp}
SYMBOL cap 2384 96 R0
SYMATTR InstName C4
SYMATTR Value {clp}
SYMBOL cap 1408 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C18
SYMATTR Value {cpz}
SYMBOL res 1424 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {rpz}
SYMBOL OpAmps\\UniversalOpAmp4 1728 32 R0
SYMATTR InstName Opamp2
SYMATTR Value2 Avol={avol} GBW={gbw} Slew={slew}
SYMATTR SpiceLine Ilimit={il} Rail=0 Vos={vos} Phimargin={phi}
SYMATTR SpiceLine2 En={en} In={iin} Rin={rin} Ro={ro} Ccm={ccm} Cdiff={cdiff}
SYMBOL res 1600 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL res 1776 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 1.5Meg
SYMBOL OpAmps\\UniversalOpAmp4 2560 16 R0
SYMATTR InstName Opamp3
SYMATTR Value2 Avol={avol} GBW={gbw} Slew={slew}
SYMATTR SpiceLine Ilimit={il} Rail=0 Vos={vos} Phimargin={phi}
SYMATTR SpiceLine2 En={en} In={iin} Rin={rin} Ro={ro} Ccm={ccm} Cdiff={cdiff}
SYMBOL cap 2816 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value {cc}
SYMBOL cap 2192 -80 R0
SYMATTR InstName C9
SYMATTR Value {clp}
SYMBOL res 2160 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value {rlp}
TEXT 744 824 Left 2 ;.noise V(Shaper) I1 dec 50 1 20e6\n.meas NOISE Vonoise INTEG V(onoise)\n;.step dec param gbw 1Meg 1G 50\n;.step dec param cf 0.1p 10p 10
TEXT 744 976 Left 2 !.param Cdet=0p Vps=1570m cs=1n rs=100Meg cc=0.1e-6
TEXT 1512 336 Left 2 ;.tran 0 1m 0 1u\n.step param cs list 5p 1p\n;.step param Vps list 16.87m 189.33m 335.47m 380.94m 571.99m 857.98m 1143.97m 1429.96m 1568.96m\n;.step param Vps list 4.36m 8.6m 41m 85m\n;.step param x 0 0.5 0.01\n;---------------------- CSA -----------------------------\n.meas TRAN MAX_CSA MAX V(csa)\n.meas TRAN MIN_CSA MIN V(csa)\n.meas TRAN T10MINR FIND time WHEN V(csa)=0.1*(MIN_CSA)\n.meas TRAN T90MINR FIND time WHEN V(csa)=0.9*(MIN_CSA) \n.meas TRAN T10MINF FIND time WHEN V(csa)=0.1*(MIN_CSA) rise=1\n.meas TRAN T90MINF FIND time WHEN V(csa)=0.9*(MIN_CSA) rise=1\n.meas TRAN TR_MIN PARAM T90MINR-T10MINR\n.meas TRAN TF_MIN PARAM T10MINF-T90MINF\n;---------------------- OUT -----------------------------\n.meas TRAN MAX_OUT MAX V(out)\n.meas TRAN MIN_OUT MIN V(out)\n.meas TRAN T10MAXR FIND time WHEN V(out)=0.1*(MAX_OUT)\n.meas TRAN T90MAXR FIND time WHEN V(out)=0.9*(MAX_OUT)\n.meas TRAN T10MAXF FIND time WHEN V(out)=0.1*(MAX_OUT) fall=1\n.meas TRAN T90MAXF FIND time WHEN V(out)=0.9*(MAX_OUT) fall=1\n.meas TRAN TR_MAX PARAM T90MAXR-T10MAXR\n.meas TRAN TF_MAX PARAM T10MAXF-T90MAXF
TEXT -416 416 Left 2 ;;----- OPA859 ------\n.PARAM avol=1.7k gbw=900Meg slew=1150Meg il=15m vos=0.9m phi=45 en=3.3n in=3f rin=1e12 ro=0.15 ccm=0.62p cdiff=0.2p vsp=2.5
TEXT -416 256 Left 2 ;;----- TL082I ------\n.param avol=200k gbw=4Meg slew=16Meg il=0 vos=3m phi=45 en=15n in=10f rin=1e12 ro=300 Ccm=1p Cdiff=2p vsp=9
TEXT -416 336 Left 2 ;;----- OPA657 ------\n.PARAM avol=3k gbw=1600Meg slew=700Meg il=0 vos=0.25m phi=45 en=4.8n in=1.3f rin=1e12 ro=0.02 ccm=0.7p cdiff=4.5p vsp=5
TEXT -416 496 Left 2 ;;----- OPA818 ------\n.param avol=40k gbw=2700Meg slew=1400Meg il=50m vos=0.35m phi=45 en=2.2n in=2.5f rin=500e9 ro=0.2 ccm=1.9p cdiff=0.5p vsp=5
TEXT -424 592 Left 2 ;;----- ADA4817 ------\n.param avol=1.7k gbw=1050Meg slew=870Meg il=0 vos=0.4m phi=45 en=4n in=2.5f rin=500e9 ro=0.15 ccm=0.3p cdiff=0.1p vsp=5
TEXT -424 664 Left 2 ;;----- ADA4637 ------\n.param avol=1000k gbw=19Meg slew=170Meg il=0 vos=0.4m phi=45 en=4n in=2.5f rin=10e12 ro=41 ccm=7p cdiff=8p vsp=9
TEXT 1512 1040 Left 2 ;.PARAM cf=0.5e-12 rf=100e6 cpz=500e-12 rpz=100e3 chp=100e-9 rhp=1e6 clp=10e-12 rlp=1e6 cc=0.1e-6 cpcb=17e-12
